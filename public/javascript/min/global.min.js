function callMobile(e,t){if(!e)return void $.error("您没有要拨打的电话号码！");if(!t||"0000"==t)return void $.error("您没有设置分机号不能拨打电话！");var a={action:"SendDial",companyid:10,auth:"1a49a3788fd811e4a1bbb083febfd349",exten:t,staffid:"88",phonenum:e};$.ajax({async:!1,url:"http://192.168.1.5:9500/interface.php",type:"POST",cache:!1,data:a,dataType:"json",success:function(e){1==e?$.alert("已拨打电话，请查看分机！"):0==e&&$.alert("拨打电话失败，请联系管理员！")},error:function(e,t,a){$.error(e.statusText)}})}$(function(){$.ajaxSetup({data:{_ajax:"true"}}),$(".date-picker").datetimepicker({autoclose:!0,language:"zh-CN",weekStart:1}),$("#PagerGird table").delegate("tr","click",function(){var e=$(".table").attr("data-multi"),t=$(this).index(),a=$(this).data("isSelect");if(a)$(this).children("td").css(t%2==0?{"background-color":"#f9f9f9"}:{"background-color":"#fff"}),e||$(".table").data("selectIndex",-1),$(this).data("isSelect",!1),$(this).find(":checkbox").removeAttr("checked");else{if(!e){var r=$(".table").data("selectIndex");r>-1&&($(".table tbody tr").eq(r).children("td").css(r%2==0?{"background-color":"#f9f9f9"}:{"background-color":"#fff"}),$(".table tbody tr").eq(r).data("isSelect",!1))}$(this).data("isSelect",!0),$(".table").data("selectIndex",t),$(this).children("td").css({"background-color":"#FDEB85"}),$(this).find(":checkbox").attr("checked","checked")}}),$("#PagerGird table").delegate("tr","mouseover",function(){var e=$(this).data("isSelect");e||$(this).children("td").css({"background-color":"#BFDFFF"})}).delegate("tr","mouseout",function(){var e=$(this).index(),t=$(this).data("isSelect");t||$(this).children("td").css(e%2==0?{"background-color":"#f9f9f9"}:{"background-color":"#fff"})}),$("input[type='number']").keydown(function(e){if(e.ctrlKey===!0||e.shiftKey===!0)return!1;var t=e.keyCode;if(!(t>=48&&57>=t||t>=96&&105>=t||t>=33&&40>=t||t>=8&&9>=t||46==t||13==t||190==t||110==t))return!1})}),jQuery.extend({pagerApi:function(e){var t={method:"",page:1,pageSize:15,beforeSend:!0,success:!1},a=$.extend(t,e),r={};$("#divParams li input").each(function(e,t){var a=$(t).attr("name"),n=$(t).val();""!=$.trim(n)&&(r[a]=$(t).val())}),$("#divParams li select").each(function(e,t){var a=$(t).attr("name"),n=$(t).val(),o=$(t).attr("data-type");""!=$.trim(n)&&(r[a]="bool"==o?"1"==n?!0:!1:encodeURIComponent(n))}),r.pageIndex=a.page,r.pageSize=a.pageSize,"function"==typeof a.beforeSend&&a.beforeSend(),$.ajax({url:"/Api/"+a.method,data:r,cache:!1,dataType:"json",type:"GET",success:function(e){"function"==typeof a.success&&a.success(e)}})},api:function(e){var t={method:"",data:{},type:"POST",async:!0,beforeSend:!1,success:!1,complete:!1},a=$.extend(t,e),r={};if("function"==typeof a.beforeSend){var n=a.beforeSend();if("undefined"!=typeof beforeSend&&!n)return!1}$.extend(r,a.data),$.ajax({url:"/Api/"+a.method,data:r,cache:!1,dataType:"json",async:a.async,type:a.type,success:function(e){return e.isSuccess?void("function"==typeof a.success&&a.success(e.data)):($.error(e.errMsg),!1)},complete:a.complete})},showImg:function(e){return e=$.imgHost+e,"<img src='"+e+"' width='50px' height='50px' />"},showMobile:function(e,t){return e?'<a class="green" href="javascript:callMobile('+e+","+t+')" data-rel="tooltip" data-original-title="打电话"><i data-operate="mobile" class="icon-headphones bigger-130"></i>'+e+"</a>":"无"},showBool:function(e){return e?'<i class="fa fa-check green"></i>':'<i class="fa fa-times red"></i>'},showDate:function(e){return e?"0001-01-01 00:00:00"==e||"1900-01-01 00:00:00"==e?"":(e=e.toString(),e.indexOf(" ")>=0?e.substr(0,e.indexOf(" ")):e):""},showUrl:function(e,t){return"<a href='"+encodeURI(e)+"'>"+t+"</a>"},showUrls:function(e,t){return"<a href='"+e+"'>"+t+"</a>"},showUrlss:function(e,t){return"<a href='"+e+"' target='blank'>"+t+"</a>"},alert:function(e,t){var a=top.layer.alert(e,1,t);return top.arrDlg.push(a),a},warn:function(e){var t=parent.layer.msg(e);return t},error:function(e){var t=parent.layer.msg(e);return t},confirm:function(e,t){var a=parent.$.layer({area:["auto","auto"],dialog:{msg:e,btns:2,type:4,btn:["确定","取消"],yes:function(){"function"==typeof t&&t()},no:function(){}}});return a},open:function(e){var t={title:"系统提示",url:"",data:{},width:450,height:200,callback:!1},a=$.extend(t,e),r=$.param(a.data);""!=$.trim(r)&&(r="?"+r+"&pageStatus="+a.pageStatus);var n=top.$.layer({type:2,shadeClose:!1,fix:!1,title:a.title,maxmin:!0,iframe:{src:a.url+r},area:[a.width+"px",a.height+"px"],end:function(){"function"==typeof a.callback&&a.callback()}});return top.arrDlg.push(n),n},openDiv:function(e,t){var a=$.layer({type:1,shade:[.5,"#000",!0],area:t,title:!1,border:[0],page:{dom:e}});return a},closeDlg:function(e){if(e||(e=1),top.arrDlg.length>0)for(var t=1;e>=t;t++){var a=top.arrDlg[top.arrDlg.length-1];top.arrDlg=top.arrDlg.remove(top.arrDlg.length-1),top.layer.close(a)}},closeAllDlg:function(){top.layer.closeAll()},loading:function(){load=top.layer.load("正在努力加载...",2)},closeLoading:function(){top.layer.close(load)},loadPageStatus:function(){var e=$.getParam("pageStatus");e==$.Enum.pageStatus.browse?($("input[ddata-oper='eidt']").attr("readonly",!0),$("button[ddata-oper='eidt']").hide(),$("input[ddata-oper='eidt'][type='file']").hide()):e==$.Enum.pageStatus.edit&&($("input[ddata-oper='eidt']").attr("readonly",!1),$("button[ddata-oper='eidt']").show(),$("input[ddata-oper='eidt'][type='file']").show())},getSelectId:function(e){var t="",a=[];return $(".table tr").each(function(e,r){1==$(r).data("isSelect")&&(t=$(r).attr("data-id"),a.push(t))}),a.length>1?a:e?a:t},getSelectStatusId:function(){var e="";return $(".table tr").each(function(t,a){1==$(a).data("isSelect")&&(e=$(a).attr("data-stauid"))}),e},getFileName:function(e){return e?e.substr(e.lastIndexOf("/")+1):""},getFileType:function(e){return e?e.substr(e.lastIndexOf(".")+1):""}}),jQuery.fn.extend({upload:function(e){var t={url:"/Upload/Index",data:{},success:!1},a=$.extend(t,e);return this.fileupload({autoUpload:!0,url:a.url,formData:a.data,dataType:"json",done:a.success,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i})}}),$.currentFrame=top.$("#container").contents(),$.currentFrameParent=window.parent,$.imgHost="http://img.1caifu.com/";